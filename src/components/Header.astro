---
import Button from "./Button.astro";
import { Menu } from "@lucide/astro";

const data = {
  logo: {
    image: "/gdg-logo.png",
    imageAlt: "Logo del GDG ICA",
    name: "GDG ICA",
    description: "Google Developer Group Ica",
  },
  links: [
    {
      id: 1,
      text: "Nosotros",
      url: "/nosotros",
      target: "_self",
    },
    {
      id: 2,
      text: "Equipo",
      url: "/equipo",
      target: "_self",
    },
    {
      id: 3,
      text: "Eventos",
      url: "/eventos",
      target: "_self",
    },
    {
      id: 4,
      text: "Patrocinadores",
      url: "/patrocinadores",
      target: "_self",
    },
  ],
  buttonMember: {
    text: "!Quiero ser miembro!",
    url: "/",
    target: "_blank",
  },
  buttonContact: {
    text: "Contactanos",
    url: "/",
    target: "_blank",
  },
};
---

<header class="border-gray-custom border-b bg-white py-4">
  <div class="mx-auto max-w-[1400px] px-4">
    <div class="flex items-center justify-between">
      <a href="/" class="flex items-center gap-3 lg:basis-1/3">
        <img
          src={data.logo.image}
          class="h-[40px] w-[40px] lg:h-[64px] lg:w-[64px]"
          width={64}
          height={64}
          alt={data.logo.imageAlt}
        />
        <div>
          <h1 class="text-primary text-lg font-bold">{data.logo.name}</h1>
          <p class="text-secondary text-xs">{data.logo.description}</p>
        </div>
      </a>
      <nav
        id="navigation"
        aria-label="Navegación principal"
        class="fixed inset-0 top-[77px] z-10 flex grow translate-x-full flex-col justify-start gap-6 bg-white px-4 py-10 transition-all md:gap-0 lg:static lg:translate-0 lg:flex-row lg:items-center lg:justify-between lg:py-0"
      >
        <ul class="flex flex-col gap-6 lg:flex-row">
          {
            data.links.map((link) => (
              <li>
                <a
                  href={link.url}
                  target={link.target}
                  class="text-secondary text-base font-medium"
                  aria-label={`Enlace a ${link.text}`}
                >
                  {link.text}
                </a>
              </li>
            ))
          }
        </ul>
        <div class="flex flex-col gap-3 lg:flex-row">
          <Button
            variant="solid"
            href={data.buttonMember.url}
            target={data.buttonMember.target}
          >
            {data.buttonMember.text}
          </Button>
          <Button
            variant="outline"
            href={data.buttonContact.url}
            target={data.buttonContact.target}
          >
            {data.buttonContact.text}
          </Button>
        </div>
      </nav>
      <button id="hamburgerButton" class="lg:hidden" aria-label="Abrir menú">
        <Menu stroke-width={1.5} />
      </button>
    </div>
  </div>
</header>
<script is:inline>
  function initMenu() {
    const menuButton = document.querySelector("#hamburgerButton");
    const menuNavigation = document.querySelector("#navigation");

    if (!menuButton || !menuNavigation) return;

    // Toggle menú
    menuButton.onclick = () => {
      menuNavigation.classList.toggle("translate-x-full");
    };

    // Cerrar menú al hacer click en un link
    menuNavigation.querySelectorAll("a").forEach((link) => {
      link.onclick = () => {
        menuNavigation.classList.add("translate-x-full");
      };
    });
  }

  // Ejecutar al cargar
  initMenu();

  // Ejecutar después de cada transición de página
  document.addEventListener("astro:after-swap", initMenu);
</script>
